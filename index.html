<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>ROCKET MO (v1.64)</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700;800&display=swap" rel="stylesheet">
<style>
  :root{ --glass:rgba(20,24,28,.8); --bg:#0b0d10; }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:var(--bg);overflow:hidden}
  body{font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,Arial;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}
  #game{position:fixed;top:50%;left:50%;width:1920px;height:1080px;transform:translate(-50%,-50%) scale(1);transform-origin:center center;background:#000;touch-action:none;image-rendering:auto;border-radius:14px;border:1px solid rgba(255,255,255,.08)}
  .hud{position:fixed;top:10px;left:50%;transform:translateX(-50%);display:flex;gap:12px;pointer-events:none;z-index:12}
  .badge{background:var(--glass);border-radius:10px;padding:4px 10px;color:#fff;font-weight:700;font-size:14px;min-width:84px;text-align:center;border:1px solid rgba(255,255,255,.1)}
  .overlay{position:fixed;inset:0;display:grid;place-items:center;pointer-events:none;z-index:10;padding:16px}
  .splash{pointer-events:auto;background:rgba(20,24,28,.86);color:#fff;border-radius:18px;border:1px solid rgba(255,255,255,.12);backdrop-filter:blur(6px);box-shadow:0 22px 60px rgba(0,0,0,.55);padding:32px 26px 22px;text-align:center}
  .splash h1{margin:0;font-weight:800;font-size:clamp(28px,7vw,56px);background:linear-gradient(180deg,#ffd54a 0%,#fff7c5 35%,#ff7a3a 100%);-webkit-background-clip:text;color:transparent}
  .splash button{cursor:pointer;padding:10px 16px;font-weight:800;border-radius:12px;font-size:14px;border:1px solid rgba(255,255,255,.18);background:#ffe07a;color:#0b0d10;margin-top:12px}
  .card{pointer-events:auto;color:#fff;background:var(--glass);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:20px 22px;text-align:center;backdrop-filter:blur(6px);max-width:min(92vw,560px);max-height:calc(100vh - 64px);overflow:auto}
  .card h1{margin:0 0 8px;font-size:clamp(20px,4vw,34px);font-weight:800;color:#fff}
  .card p{margin:0;font-size:clamp(13px,3.2vw,16px);color:#fff}
  #sysImg{max-width:100%;max-height:240px;object-fit:contain;margin:10px auto;display:none}
  #sysSpecs th,#sysSpecs td{border-bottom:1px solid rgba(255,255,255,.25);padding:6px;text-align:left;color:#fff}
  #sysSpecs th{font-weight:800}
</style>
</head>
<body>
<canvas id="game" width="1920" height="1080"></canvas>
<div class="hud">
  <div class="badge">Score: <span id="scoreVal">0</span></div>
  <div class="badge">Last: <span id="lastVal">0</span></div>
  <div class="badge">Best: <span id="bestVal">0</span></div>
</div>
<div class="overlay">
  <div id="splash" class="splash">
    <h1>ROCKET MO</h1>
    <button id="startBtn">▶ Tap to Start</button>
  </div>
  <div id="gameOverCard" class="card hidden">
    <h1>Game Over</h1>
    <p id="finalScoreP">Score: 0 • Best: 0</p>
    <img id="sysImg" alt="System image"/>
    <div id="sysInfoBox" style="margin-top:12px;text-align:left;display:none">
      <div style="font-weight:800;font-size:16px;margin-bottom:6px">System: <span id="sysTitle">—</span></div>
      <div id="sysBlurb" style="opacity:.95;font-size:13px;margin-bottom:8px">—</div>
      <div id="sysSpecsBox" style="margin-top:10px;display:none">
        <table id="sysSpecs" style="width:100%;border-collapse:collapse;font-size:13px"></table>
      </div>
    </div>
  </div>
</div>
<script>
(()=>{
const W=1920,H=1080;
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d',{alpha:false});
ctx.imageSmoothingEnabled=true;
ctx.imageSmoothingQuality='high';

const isMobile=/Mobi|Android|iPhone|iPad/i.test(navigator.userAgent);
let physicsHz=isMobile?90:60; // optimize for 60hz PC
let STEP=1/physicsHz,acc=0,lastTs=performance.now();
const MAX_FRAME_DT=0.12;

const SPEED_MULT=isMobile?1.4:1.5;
const G=4800*SPEED_MULT;
const LIFT_V0=-1250*SPEED_MULT; // your preferred flap
const MAX_FALL=2200*SPEED_MULT;
let SCROLL_PPS=(isMobile?480:440)*SPEED_MULT;

const bird={x:W*0.2,y:H*0.5,w:80,h:80,v:0};
function drawBird(){
  ctx.fillStyle="white";ctx.fillRect(bird.x-bird.w/2,bird.y-bird.h/2,bird.w,bird.h);
  // exhaust flame
  ctx.fillStyle="orange";
  ctx.fillRect(bird.x-bird.w/2-20,bird.y-8,18,16);
  // smoke
  ctx.fillStyle="rgba(120,120,120,0.4)";
  for(let s of SMOKE){ctx.fillRect(s.x,s.y,6,6);}
}

let SMOKE=[],SMOKE_RATE=isMobile?32:14,SMOKE_MAX=isMobile?180:120;let smokeTimer=0;
function updateSmoke(dt){
  smokeTimer+=dt*SMOKE_RATE;
  while(smokeTimer>1){smokeTimer--;if(SMOKE.length<SMOKE_MAX)SMOKE.push({x:bird.x-40,y:bird.y+Math.random()*20-10});}
  for(let i=SMOKE.length-1;i>=0;i--){SMOKE[i].x-=SCROLL_PPS*dt*0.4;SMOKE[i].y+=20*dt;if(SMOKE[i].x<0)SMOKE.splice(i,1);}
}

let started=false,over=false;
const scoreEl=document.getElementById('scoreVal'),lastEl=document.getElementById('lastVal'),bestEl=document.getElementById('bestVal');
let score=0,last=0,best=0;

// Obstacles pattern
const VERTICAL_X_GAP=Math.round(SCROLL_PPS*1.8);
const H_BUFFER=Math.round(W*0.06),H_BAR_LEN=Math.round(W*0.55),H_BAR_THICK=Math.round(H*0.09),H_BETWEEN=Math.round(W*0.25);
let obstacles=[],pattern='VERT',vertCount=0,hLeft=0,nextSpawn= W*0.3;

function spawnVertical(){
  obstacles.push({type:'V',x:W,w:180});
}
function spawnHorizontal(){
  obstacles.push({type:'H',x:W,y:Math.random()*(H*0.7)+H*0.15,len:H_BAR_LEN,thick:H_BAR_THICK});
}
function stepObstacles(dt){
  nextSpawn-=SCROLL_PPS*dt;
  while(nextSpawn<=0){
    if(pattern==='VERT'){
      spawnVertical();vertCount++;nextSpawn+=VERTICAL_X_GAP;
      if(vertCount>=10){pattern='H';hLeft=3;nextSpawn+=H_BUFFER;}
    }else{
      spawnHorizontal();hLeft--;nextSpawn+=hLeft>0?H_BETWEEN:H_BUFFER;
      if(hLeft<=0){pattern='VERT';vertCount=0;}
    }
  }
  for(const o of obstacles)o.x-=SCROLL_PPS*dt;
  obstacles=obstacles.filter(o=>o.x+o.w>0);
}
function drawObstacles(){
  ctx.fillStyle="green";
  for(const o of obstacles){
    if(o.type==='V')ctx.fillRect(o.x,0,o.w,H);
    else ctx.fillRect(o.x,o.y-o.thick/2,o.len,o.thick);
  }
}

function endGame(){
  over=true;
  document.getElementById("finalScoreP").textContent=`Score: ${score} • Best: ${best}`;
  document.getElementById("gameOverCard").classList.remove("hidden");
}

function loop(ts){
  let dt=(ts-lastTs)/1000;if(dt>MAX_FRAME_DT)dt=MAX_FRAME_DT;lastTs=ts;acc+=dt;
  ctx.fillStyle="#111";ctx.fillRect(0,0,W,H);
  while(acc>=STEP){ if(started&&!over){
    bird.v+=G*STEP;if(bird.v>MAX_FALL)bird.v=MAX_FALL;bird.y+=bird.v*STEP;
    stepObstacles(STEP);updateSmoke(STEP);} acc-=STEP; }
  drawObstacles();drawBird();
  if(started||over){ctx.fillStyle="rgba(150,150,150,.95)";ctx.font="700 12px Montserrat";ctx.fillText("v1.64",14,H-14);}
  requestAnimationFrame(loop);
}
loop(performance.now());

document.getElementById('startBtn').onclick=()=>{started=true;document.getElementById('splash').classList.add('hidden');bird.v=0;score=0;};
document.addEventListener('keydown',e=>{if(e.code==='Space'){bird.v=LIFT_V0;}});
document.addEventListener('pointerdown',()=>{if(!started){started=true;document.getElementById('splash').classList.add('hidden');}else if(!over){bird.v=LIFT_V0;}});
})();
</script>
</body>
</html>
